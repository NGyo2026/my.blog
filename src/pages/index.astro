---
import { getCollection } from 'astro:content';
import Layout from '../layouts/Layout.astro';
import PostCard from '../components/PostCard.astro';
import { sortPostsByDate } from '../utils/blog';

const posts = sortPostsByDate(
	await getCollection('blog', ({ data }) => !data.draft)
).slice(0, 3);
---

<Layout title="홈" description="Astro로 만든 차분하고 아름다운 정적 블로그.">
	<section class="hero container">
		<div class="hero-card card">
			<p class="eyebrow">정적 블로그</p>
			<h1>글쓰기를 위한 차분한 공간을 만드세요.</h1>
			<p class="subtitle">
				마크다운 중심, 빠른 빌드, 월별·태그·카테고리 정리.
			</p>
			<div class="hero-actions">
				<a class="primary" href="/blog">블로그 보기</a>
				<a class="ghost" href="/about">사이트 소개</a>
			</div>
		</div>
	</section>

	<section class="container">
		<h2 class="section-title">최근 글</h2>
		<div class="grid">
			{posts.map((post) => (
				<PostCard post={post} />
			))}
		</div>
	</section>
</Layout>

<style>
	.hero {
		padding: 60px 0 40px;
	}

	.hero-card {
		padding: 42px;
		display: grid;
		gap: 16px;
		background: radial-gradient(
				circle at top right,
				color-mix(in srgb, var(--accent) 20%, transparent),
				transparent 55%
			),
			var(--card);
	}

	.eyebrow {
		text-transform: uppercase;
		letter-spacing: 0.2em;
		font-size: 0.75rem;
		color: var(--fg-muted);
		margin: 0;
	}

	h1 {
		margin: 0;
		font-size: clamp(2.2rem, 3vw, 3.2rem);
	}

	.subtitle {
		margin: 0;
		color: var(--fg-muted);
		max-width: 560px;
	}

	.hero-actions {
		display: flex;
		gap: 12px;
		flex-wrap: wrap;
		margin-top: 12px;
	}

	.primary,
	.ghost {
		padding: 12px 22px;
		border-radius: 999px;
		font-weight: 600;
	}

	.primary {
		background: var(--accent);
		color: white;
	}

	.ghost {
		border: 1px solid var(--border);
		color: var(--fg);
	}

	.grid {
		display: grid;
		gap: 18px;
	}
</style>
